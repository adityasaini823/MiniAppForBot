<!DOCTYPE html>
<html>
<head>
  <title>Secure Link Redirect</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  Redirecting....
  <h2 id="error"></h2>
 <script> document.addEventListener("DOMContentLoaded", async () => {
  const webApp = window.Telegram.WebApp;
  webApp.ready();
  webApp.expand();
  const initData = webApp.initDataUnsafe;
  const startParam = initData.start_param;
  const chatType = initData.chat_type;
  const isCompact = !webApp.isExpanded;
  try{
      const uuid=startParam;
      const response= await axios.get(`https://urlencrypterbot.onrender.com/api/resolve?uuid=${uuid}`);
      const data=response.data;
      if(data){
          // document.getElementById("test-data").innerHTML = JSON.stringify({data});
          webApp.openTelegramLink(data.originalLink);
          webApp.close()
      }
  }catch(err){
      alert("Failed to redirect.Please try again in some time");
  }
});</script>
</body>
</html>
